<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Network Topology Builder</title>
  <link rel="stylesheet" href="css/networkdesign.css" />
</head>
<body>
<div class="app">
  <header>Network Topology Builder</header>

  <div class="toolbar">
    <!-- Device buttons -->
    <button data-device-type="Router">Add Router</button>
    <button data-device-type="Switch">Add Switch</button>
    <button data-device-type="Host">Add Host</button>
    <button data-device-type="Client">Add Client</button>
    <button data-device-type="Server">Add Server</button>
    <button data-device-type="IoT">Add IoT</button>
    <button data-device-type="ISP">Add ISP</button>

    <!-- Link mode -->
    <button id="toggle-link-mode">Link mode: OFF</button>

    <!-- Export / Import -->
    <button id="export-topology">Export topology</button>
    <button id="import-topology">Import topology</button>

    <!-- Cisco-style config summary -->
    <button id="export-config-summary">Export config summary</button>
  </div>

  <div class="main">
    <!-- Workspace (topology canvas) -->
    <div id="workspace">
      <!-- SVG layer for links -->
      <svg id="links-layer"></svg>
      <div class="hint">
        Left-click to drag · Toggle "Link mode" to connect devices · Right-click a device for options
      </div>

      <!-- Hover tooltip for devices -->
      <div id="device-tooltip" class="tooltip hidden"></div>

      <!-- Link details on click -->
      <div id="link-details" class="link-details hidden"></div>
    </div>

    <!-- Details / config panel -->
    <aside id="details-panel" class="hidden">
      <h2>Device Settings</h2>
      <div class="badge">
        <span class="badge-dot"></span>
        <span id="panel-device-id">No device selected</span>
      </div>

      <div class="field">
        <label for="panel-name">Name</label>
        <input id="panel-name" type="text" placeholder="R1, SW1, Server01 ..." />
      </div>

      <div class="field">
        <label for="panel-type">Type</label>
        <select id="panel-type">
          <option>Router</option>
          <option>Switch</option>
          <option>Host</option>
          <option>Client</option>
          <option>Server</option>
          <option>IoT</option>
          <option>ISP</option>
          <option>Firewall</option>
          <option>Other</option>
        </select>
      </div>

      <div class="field">
        <label for="panel-ip">Management IP (optional)</label>
        <input id="panel-ip" type="text" placeholder="10.0.0.1" />
        <div class="small" id="ip-error" style="display:none;">Invalid IPv4 address.</div>
      </div>

      <div class="field">
        <label>Interfaces</label>
        <div id="interfaces-list"></div>
        <button type="button" class="small-btn" id="add-interface">+ Add interface</button>
        <div class="small" id="interfaces-help">
          Routers/Switches/etc: name + IP + subnet.<br>
          Hosts/Clients/Servers/IoT: NIC/WIFI + IP + subnet + gateway + DNS.
        </div>
      </div>

      <div class="field">
        <label for="panel-config">Config (paste or upload)</label>
        <textarea id="panel-config" placeholder="# Running-config or similar"></textarea>
        <div class="small">
          Tip: Right-click device → "Upload config file" to import from a file.
        </div>
      </div>

      <div class="panel-buttons">
        <button class="secondary" id="panel-close">Close</button>
        <button class="primary" id="panel-save">Save</button>
      </div>

      <div id="no-selection" class="no-selection hidden">
        No device selected. Right-click a device and choose "Edit settings".
      </div>
    </aside>
  </div>

  <!-- Custom right-click context menu -->
  <div id="context-menu" class="context-menu hidden">
    <button data-action="edit">Edit settings</button>
    <button data-action="upload-config">Upload config file</button>
    <button data-action="delete">Delete device</button>
  </div>

  <!-- Hidden file inputs -->
  <input type="file" id="config-file-input" accept=".txt,.cfg,.conf,.log,.ini" />
  <input type="file" id="import-file-input" accept=".json" />
</div>

<script src="js/networkdesign.js"></script>
</body>
</html>
